---
layout: post
title:  "相对定位"
date:   2014-09-08 22:37:00
categories: Note
---

相对定位
======================

获取某个DOM元素相对与另一个DOM元素的位置; `offsetLeft, offsetTop, clientHeight, clientWidth, offsetParent`
![八个方向](http://heydelilah.github.io/data/position.png)

#### [live demo](http://heydelilah.github.io/demos/position.html)

```
{% highlight javascript %}
var getPosition = function(dom, subject, mode){
	subject = subject.get(0);
	var position = {};

	var left = mode.match('left') ? subject.offsetLeft : subject.offsetLeft + subject.offsetWidth;
	var top = mode.match('top') ?  subject.offsetTop : subject.offsetTop + subject.offsetHeight;
	var current = subject.offsetParent;

	// 不断与父容器 (offsetParent对象) 累加 offsetTop,offsetLeft
	while (current !== null && current !== document.body){
		left += current.offsetLeft;
		top += current.offsetTop;
		current = current.offsetParent;
	}
	var m = mode.split(',');
	position.left = (m[0].match('left') || m[1].match('right')) ? left-dom.outerWidth() : left;
	position.top = (m[0].match('top') || m[1].match('bottom')) ? top-dom.outerHeight() : top;

	return position;
}
{% endhighlight %}
```




